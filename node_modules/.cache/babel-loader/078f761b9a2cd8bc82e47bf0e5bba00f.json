{"ast":null,"code":"import _slicedToArray from\"F:/00 AIUB/react_ecommerce_thesis/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import {AuthProvider, AuthStatus, useAuth} from \"./auth/Auth\";\nimport{useLocation,useNavigate}from\"react-router-dom\";import{useEffect,useState}from\"react\";import DB_USERS from\"./../database/user_db\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignIn=function SignIn(){var _useState=useState(DB_USERS),_useState2=_slicedToArray(_useState,2),usersList=_useState2[0],setUsersList=_useState2[1];var navigate=useNavigate();var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];function handleSubmit(event){event.preventDefault();var formData=new FormData(event.currentTarget);var username=formData.get(\"email\");var password=formData.get(\"password\");var user=usersList.filter(function(user){return String(user.email)===String(username)&&String(user.password)===String(password);});if(user.length>0){localStorage.setItem(\"token\",user[0].token);setUser(user[0]);navigate(\"/\");}else{localStorage.removeItem(\"token\");setUser(null);alert(\"Invalid credentials\");}}useEffect(function(){if(user){navigate(\"/checkout\");}else{navigate(\"/login\");}},[user]);return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center h-screen w-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full bg-white rounded shadow-lg p-8 m-4 md:max-w-sm md:mx-auto\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"block w-full text-xl uppercase font-bold mb-4\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"mb-4\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 md:w-full\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-xs mb-1\",children:\"Username or Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border rounded p-2 outline-none focus:shadow-outline\",type:\"email\",name:\"email\",id:\"email\",placeholder:\"Username or Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 md:w-full\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-xs mb-1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full border rounded p-2 outline-none focus:shadow-outline\",type:\"password\",name:\"password\",id:\"password\",placeholder:\"Password\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-500 hover:bg-green-700 text-white uppercase text-sm font-semibold px-4 py-2 rounded\",children:\"Login\"})]})]})});};export default SignIn;","map":{"version":3,"sources":["F:/00 AIUB/react_ecommerce_thesis/src/components/SignIn.js"],"names":["useLocation","useNavigate","useEffect","useState","DB_USERS","SignIn","usersList","setUsersList","navigate","user","setUser","handleSubmit","event","preventDefault","formData","FormData","currentTarget","username","get","password","filter","String","email","length","localStorage","setItem","token","removeItem","alert"],"mappings":"uHAAA;AACA,OAASA,WAAT,CAAsBC,WAAtB,KAAyC,kBAAzC,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,cAAkCF,QAAQ,CAACC,QAAD,CAA1C,wCAAOE,SAAP,eAAkBC,YAAlB,eACA,GAAIC,CAAAA,QAAQ,CAAGP,WAAW,EAA1B,CACA,eAAwBE,QAAQ,CAAC,IAAD,CAAhC,yCAAOM,IAAP,eAAaC,OAAb,eAEA,QAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA+D,CAC3DA,KAAK,CAACC,cAAN,GAEA,GAAIC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,CAAaH,KAAK,CAACI,aAAnB,CAAf,CACA,GAAIC,CAAAA,QAAQ,CAAGH,QAAQ,CAACI,GAAT,CAAa,OAAb,CAAf,CACA,GAAIC,CAAAA,QAAQ,CAAGL,QAAQ,CAACI,GAAT,CAAa,UAAb,CAAf,CAEA,GAAIT,CAAAA,IAAI,CAAGH,SAAS,CAACc,MAAV,CAAiB,SAAAX,IAAI,QAAIY,CAAAA,MAAM,CAACZ,IAAI,CAACa,KAAN,CAAN,GAAuBD,MAAM,CAACJ,QAAD,CAA7B,EAA2CI,MAAM,CAACZ,IAAI,CAACU,QAAN,CAAN,GAA0BE,MAAM,CAACF,QAAD,CAA/E,EAArB,CAAX,CAEA,GAAIV,IAAI,CAACc,MAAL,CAAc,CAAlB,CAAqB,CACjBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BhB,IAAI,CAAC,CAAD,CAAJ,CAAQiB,KAAtC,EACAhB,OAAO,CAACD,IAAI,CAAC,CAAD,CAAL,CAAP,CACAD,QAAQ,CAAC,GAAD,CAAR,CACH,CAJD,IAIO,CACHgB,YAAY,CAACG,UAAb,CAAwB,OAAxB,EACAjB,OAAO,CAAC,IAAD,CAAP,CACAkB,KAAK,CAAC,qBAAD,CAAL,CACH,CACJ,CAED1B,SAAS,CAAC,UAAM,CACZ,GAAGO,IAAH,CAAQ,CACJD,QAAQ,CAAC,WAAD,CAAR,CACH,CAFD,IAGI,CACAA,QAAQ,CAAC,QAAD,CAAR,CACH,CACJ,CAPQ,CAON,CAACC,IAAD,CAPM,CAAT,CAQA,mBACI,YAAK,SAAS,CAAC,mCAAf,uBACI,aAAK,SAAS,CAAC,kEAAf,wBACI,aAAM,SAAS,CAAC,+CAAhB,mBADJ,cAEI,cAAM,SAAS,CAAC,MAAhB,CAAuB,QAAQ,CAAEE,YAAjC,wBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,cAAO,OAAO,CAAC,OAAf,CAAuB,SAAS,CAAC,oBAAjC,+BADJ,cAEI,cAAO,SAAS,CAAC,6DAAjB,CAA+E,IAAI,CAAC,OAApF,CAA4F,IAAI,CAAC,OAAjG,CAAyG,EAAE,CAAC,OAA5G,CAAoH,WAAW,CAAC,mBAAhI,EAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,gBAAf,wBACI,cAAO,OAAO,CAAC,UAAf,CAA0B,SAAS,CAAC,oBAApC,sBADJ,cAEI,cAAO,SAAS,CAAC,6DAAjB,CAA+E,IAAI,CAAC,UAApF,CAA+F,IAAI,CAAC,UAApG,CAA+G,EAAE,CAAC,UAAlH,CAA6H,WAAW,CAAC,UAAzI,EAFJ,GALJ,cASI,eAAQ,SAAS,CAAC,8FAAlB,mBATJ,GAFJ,GADJ,EADJ,CAkBH,CAnDD,CAqDA,cAAeN,CAAAA,MAAf","sourcesContent":["// import {AuthProvider, AuthStatus, useAuth} from \"./auth/Auth\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport DB_USERS from \"./../database/user_db\";\r\n\r\nconst SignIn = () => {\r\n    const [usersList, setUsersList] = useState(DB_USERS);\r\n    let navigate = useNavigate();\r\n    const [user, setUser] = useState(null);\r\n\r\n    function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\r\n        event.preventDefault();\r\n\r\n        let formData = new FormData(event.currentTarget);\r\n        let username = formData.get(\"email\");\r\n        let password = formData.get(\"password\");\r\n        \r\n        let user = usersList.filter(user => String(user.email) === String(username) && String(user.password) === String(password));\r\n\r\n        if (user.length > 0) {\r\n            localStorage.setItem(\"token\", user[0].token);\r\n            setUser(user[0]);\r\n            navigate(\"/\");\r\n        } else {\r\n            localStorage.removeItem(\"token\");\r\n            setUser(null);\r\n            alert(\"Invalid credentials\");\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(user){\r\n            navigate(\"/checkout\");\r\n        }\r\n        else{\r\n            navigate(\"/login\");\r\n        }\r\n    }, [user]);\r\n    return (\r\n        <div className=\"flex items-center h-screen w-full\">\r\n            <div className=\"w-full bg-white rounded shadow-lg p-8 m-4 md:max-w-sm md:mx-auto\">\r\n                <span className=\"block w-full text-xl uppercase font-bold mb-4\">Login</span>\r\n                <form className=\"mb-4\" onSubmit={handleSubmit}>\r\n                    <div className=\"mb-4 md:w-full\">\r\n                        <label htmlFor=\"email\" className=\"block text-xs mb-1\">Username or Email</label>\r\n                        <input className=\"w-full border rounded p-2 outline-none focus:shadow-outline\" type=\"email\" name=\"email\" id=\"email\" placeholder=\"Username or Email\" />\r\n                    </div>\r\n                    <div className=\"mb-6 md:w-full\">\r\n                        <label htmlFor=\"password\" className=\"block text-xs mb-1\">Password</label>\r\n                        <input className=\"w-full border rounded p-2 outline-none focus:shadow-outline\" type=\"password\" name=\"password\" id=\"password\" placeholder=\"Password\" />\r\n                    </div>\r\n                    <button className=\"bg-green-500 hover:bg-green-700 text-white uppercase text-sm font-semibold px-4 py-2 rounded\">Login</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}